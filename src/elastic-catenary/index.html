<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elastic catenary simultaion</title>
  <link rel="stylesheet" href="./style.css">
  <script src="./script.js"></script>
  <script src="./physics.js"></script>
</head>

<body>
  <div style="float: left;">
    <canvas id="canvas"></canvas>
  </div>

  <button id="control-button" onclick="toggleControl(this);">hide control</button>
  <div id="control-panel">
    <div id="settings">

      <div>
        total number of points<br>
        <input type="range" id="point-cnt-range" class="reset" min="3" max="101" value="50"
          oninput="this.nextElementSibling.value = this.value">
        <input type="number" id="point-cnt" class="reset" min="3" max="101" value="50"
          oninput="this.previousElementSibling.value = this.value">
      </div>

      <div>
        initial distance between adjacent points<br>
        <input type="range" id="distance-range" class="reset" step="0.1" min="0.1" max="100" value="15"
          oninput="this.nextElementSibling.value = this.value">
        <input type="number" id="distance" class="reset" step="0.1" min="0.1" max="100" value="15"
          oninput="this.previousElementSibling.value = this.value">
      </div>

      <div>
        spring constant<br>
        <input type="range" id="spring-constant-range" value="1" step="0.01" min="0.01" max="10"
          oninput="this.nextElementSibling.value = this.value">
        <input type="number" id="spring-constant" value="1" step="0.01" min="0.01" max="10"
          oninput="this.previousElementSibling.value = this.value">
      </div>

      <div>
        distance between two points when no force is applied<br>
        <input type="range" id="initLen-range" value="5" step="0.1" min="0" max="100"
          oninput="this.nextElementSibling.value = this.value">
        <input type="number" id="initLen" value="5" step="0.1" min="0" max="100"
          oninput="this.previousElementSibling.value = this.value">
      </div>

      <div>
        gravity constant<br>
        <input type="range" id="gravity-constant-range" value="2" step="0.01" min="0" max="10"
          oninput="this.nextElementSibling.value = this.value">
        <input type="number" id="gravity-constant" value="2" step="0.01" min="0" max="10"
          oninput="this.previousElementSibling.value = this.value">
      </div>

      <div>
        friction constant<br>
        <input type="range" id="friction-range" value="0.2" step="0.01" min="0" max="1"
          oninput="this.nextElementSibling.value = this.value">
        <input type="number" id="friction" value="0.2" step="0.01" min="0" max="1"
          oninput="this.previousElementSibling.value = this.value">
      </div>

      <div>
        dt<br>
        <input type="range" id="dt-range" value="0.5" step="0.01" min="0" max="1"
          oninput="this.nextElementSibling.value = this.value">
        <input type="number" id="dt" value="0.5" step="0.01" min="0" max="1"
          oninput="this.previousElementSibling.value = this.value">
      </div>

      <div>
        toggleStretchOnly
        <input type="checkbox" id="toggle-stretch-only">
      </div>

      <div>
        toggleLine
        <input type="checkbox" id="toggle-line" checked>
      </div>

      <div>
        toggleCircle
        <input type="checkbox" id="toggle-circle" checked>
      </div>

      <div>
        toggleMovement
        <input type="checkbox" id="toggle-movement" checked onchange="
                if(this.checked) {
                    this.nextElementSibling.style.display = '';
                } else {
                    this.nextElementSibling.style.display = 'none';
                }
                toggleMovement = this.checked;
                ">
        <div>
          <p style="margin: 0px; margin-top: 10px;">sum of velocities: <span id="movement-sum"></span></p>
          <p style="margin: 0px;">average velocity: <span id="movement-avg"></span></p>
        </div>
      </div>
    </div>

    <div>
      <br>
      <button onclick="reset();">reset</button>
      <button id="pause"
        onclick="clearInterval(interv); this.nextElementSibling.style.display=''; this.style.display='none';">pause</button>
      <button id="resume" onclick="loop(); this.previousElementSibling.style.display=''; this.style.display='none';"
        style="display: none;">resume</button>
    </div>

    <div>
      <br>
      <button onclick="exportCoords();">export coordinates to json</button>
    </div>
  </div>

  <script src="./init.js"></script>
</body>

</html>